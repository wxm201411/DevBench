# 校园二手图书交易商城需求说明（Doubao-1.5-thinking-pro）

## 1. 功能需求
### 1.1 用户注册与登录
- 标识：F-001
- 类型：功能需求
- 描述：用户可通过手机号或邮箱注册账号，支持密码登录和短信验证码登录，登录后可查看个人信息及交易记录。
- 理由：确保用户身份唯一性，提供个性化服务入口。
- 验证方法：通过测试用例验证注册流程（手机号/邮箱验证）、登录功能（密码/验证码）及错误提示（如账号已存在、密码错误）。

### 1.2 图书信息发布
- 标识：F-002
- 类型：功能需求
- 描述：用户可发布二手图书信息，必填字段包括书名、作者、ISBN、价格、新旧程度（1-10级）、自提地点（精确到校区/楼栋）；可选字段包括图书简介、实拍图片（最多5张）。
- 理由：提供图书信息展示载体，促进交易双方信息对称。
- 验证方法：检查发布表单字段完整性（必填项未填时提示）、图片上传格式（仅支持JPG/PNG）及大小限制（单张≤2MB）、信息保存至数据库的准确性。

## 2. 技术需求
### 2.1 前端框架
- 标识：T-001
- 类型：技术需求
- 描述：前端使用arco.design vue版本开发，采用响应式布局，适配PC端（≥1280px）和移动端（≤768px）。
- 理由：符合用户指定技术栈，利用arco.design的组件库提高开发效率，保证界面一致性。
- 验证方法：检查前端项目依赖（package.json中包含@arco-design/web-vue）、页面元素在不同屏幕尺寸下的显示效果。

### 2.2 后端接口
- 标识：T-002
- 类型：技术需求
- 描述：后端使用FastApi框架提供RESTful API，接口响应格式统一为{"code":200,"msg":"成功","data":{}}，错误码遵循4xx（客户端错误）、5xx（服务端错误）规范。
- 理由：满足用户技术要求，利用FastApi的高性能（异步支持）和自动生成API文档（Swagger UI）特性。
- 验证方法：检查后端代码路由定义（使用FastApi的APIRouter）、接口测试（Postman/ curl验证响应格式）。

## 3. 数据库需求
### 3.1 数据库配置
- 标识：D-001
- 类型：数据库需求
- 描述：使用MySQL 9.3.0版本，连接信息为：主机localhost，端口3306，用户名root，密码root；数据库名定义为`secondhand_book`，字符集采用utf8mb4。
- 理由：符合用户指定数据库版本及连接信息，支持中文及特殊符号存储。
- 验证方法：通过MySQL客户端（如Navicat）验证连接配置，检查数据库字符集设置。

### 3.2 核心数据表
- 标识：D-002
- 类型：数据库需求
- 描述：至少包含用户表（user）、图书表（book）、交易表（transaction），字段需覆盖功能需求中的必填信息（如user表包含手机号、邮箱、注册时间；book表关联用户ID、ISBN、价格等）。
- 理由：支撑业务功能的数据存储与查询。
- 验证方法：检查SQLModel模型定义（是否包含必要字段及外键关联）、数据库迁移（alembic生成迁移脚本并执行）。"}}}