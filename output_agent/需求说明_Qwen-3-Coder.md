# 1. 核心需求
开发一个校园二手图书交易商城，交易采用类似闲鱼APP的自提自付款方式。用户可以在平台上注册、登录、发布图书信息、浏览图书、搜索图书、下单购买、确认自提和付款。系统还需提供消息通知、客服入口和退款流程等功能。

## 2. 技术约束

| 类型 | 约束条件            |
| ---- | ------------------- |
| 前端 | arco.design vue版本 |
| 后端 | FastApi+SQLModel    |
| 部署 | MySQL9.3.0 (主机：localhost, 端口：3306, 用户名：root, 密码：root) |

## 3. 需求功能

### 3.1 用户管理

#### 需求 1： 用户注册
**用户故事：** 作为一个新用户，我希望能够注册账户，以便使用商城服务

##### 验收标准
1. 用户输入有效的手机号、密码和验证码后，系统应当成功创建账户
2. 用户输入已注册的手机号时，系统应当提示该手机号已被注册

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 2： 用户登录
**用户故事：** 作为一个已注册用户，我希望能够登录账户，以便使用商城服务

##### 验收标准
1. 用户输入正确的手机号和密码后，系统应当允许用户登录
2. 用户输入错误的手机号或密码时，系统应当提示登录失败

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 3： 用户信息管理
**用户故事：** 作为一个已登录用户，我希望能够查看和修改个人信息，以便维护我的账户

##### 验收标准
1. 用户能够查看自己的个人信息
2. 用户能够修改自己的个人信息并保存成功

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

### 3.2 图书管理

#### 需求 4： 图书发布
**用户故事：** 作为一个已登录用户，我希望能够发布图书信息，以便出售我的二手书

##### 验收标准
1. 用户能够填写图书信息（书名、作者、价格、描述、图片等）并成功发布
2. 发布的图书信息应当在图书列表中显示

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 5： 图书浏览
**用户故事：** 作为一个用户，我希望能够浏览图书列表，以便找到我需要的书籍

##### 验收标准
1. 系统应当显示所有已发布的图书列表
2. 图书列表应当支持分页加载

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 6： 图书搜索
**用户故事：** 作为一个用户，我希望能够搜索图书，以便快速找到我需要的书籍

##### 验收标准
1. 用户能够通过书名、作者等关键词搜索图书
2. 系统应当返回符合搜索条件的图书列表

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

### 3.3 交易管理

#### 需求 7： 图书下单
**用户故事：** 作为一个已登录用户，我希望能够下单购买图书，以便完成交易

##### 验收标准
1. 用户能够选择图书并提交订单
2. 系统应当生成订单并显示订单详情

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 8： 自提确认
**用户故事：** 作为一个买家，我希望能够确认图书自提，以便完成交易

##### 验收标准
1. 买家和卖家能够在约定地点见面后确认自提
2. 系统应当记录自提状态并更新订单状态

> ##### 类型：事件驱动
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 9： 自付款确认
**用户故事：** 作为一个买家，我希望能够确认已付款，以便完成交易

##### 验收标准
1. 买家能够在自提时向卖家付款并确认
2. 系统应当记录付款状态并更新订单状态

> ##### 类型：事件驱动
##### 处理逻辑：  
```mermaid
    graph TD
```

### 3.4 消息通知

#### 需求 10： 交易状态变更通知
**用户故事：** 作为一个用户，我希望在交易状态变更时收到通知，以便及时了解交易进展

##### 验收标准
1. 当订单状态发生变更时，系统应当向相关用户发送通知
2. 用户能够在消息中心查看所有通知

> ##### 类型：事件驱动
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 11： 系统消息
**用户故事：** 作为一个用户，我希望能够接收系统消息，以便了解系统更新和重要通知

##### 验收标准
1. 系统能够向用户发送系统消息
2. 用户能够在消息中心查看所有系统消息

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

### 3.5 客服与售后

#### 需求 12： 客服入口
**用户故事：** 作为一个用户，我希望能够联系客服，以便解决使用过程中遇到的问题

##### 验收标准
1. 用户能够在应用中找到客服入口
2. 用户点击客服入口后能够与客服进行沟通

> ##### 类型：通用性
##### 处理逻辑：  
```mermaid
    graph TD
```

#### 需求 13： 退款流程
**用户故事：** 作为一个买家，我希望能够申请退款，以便在交易出现问题时维护自己的权益

##### 验收标准
1. 用户能够在订单详情页申请退款
2. 系统应当处理退款申请并更新订单状态

> ##### 类型：事件驱动
##### 处理逻辑：  
```mermaid
    graph TD
```

## 4. 非功能需求
### 4.1 性能指标
| 场景      | 要求         | 验证方式     |
| --------- | ------------ | ------------ |
| 图书列表加载 | 响应时间不超过2秒 | 性能测试工具 |
| 搜索功能   | 响应时间不超过1秒 | 性能测试工具 |

### 4.2 安全需求
- 🔒 用户密码应加密存储
- 🔒 敏感操作需要身份验证

### 4.3 兼容性
| 平台      | 支持版本     |
| --------- | ------------ |
| 微信小程序 | 基础库2.0以上 |
| iOS       | 12.0以上     |
| Android   | 7.0以上      |